<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ポケモン図鑑</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        img {
            width: 150px;
            height: 150px;
        }
        .pokemon {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>ポケモン図鑑</h1>
    <input type="number" id="pokemonNumber" placeholder="ポケモン番号を入力" min="1" />
    <button id="searchButton">検索</button>
    <div id="result"></div>

    <script>
        document.getElementById("searchButton").addEventListener("click", async () => {
            const number = document.getElementById("pokemonNumber").value;
            const resultDiv = document.getElementById("result");
            resultDiv.innerHTML = ""; // リセット

            try {
                // speciesエンドポイントからデータを取得
                const speciesResponse = await fetch(`https://pokeapi.co/api/v2/pokemon-species/${number}/`);
                const speciesData = await speciesResponse.json();

                if (!speciesData) {
                    resultDiv.innerHTML = "<p>ポケモンが見つかりませんでした。</p>";
                    return;
                }

                // 日本語名を取得
                const japaneseName = speciesData.names.find(name => name.language.name === 'ja')?.name || "不明";

                // varietiesを取得して表示
                const varieties = speciesData.varieties;
                for (const variety of varieties) {
                    const formResponse = await fetch(variety.pokemon.url);
                    const formData = await formResponse.json();
                    
                    // フォルム名をキャピタライズする
                    const formName = formData.name.charAt(0).toUpperCase() + formData.name.slice(1);

                    resultDiv.innerHTML += `<div class="pokemon">
                        <h3>${japaneseName}</h3>
                        <h3>${formName}</h3>
                        <img src="${formData.sprites.other['official-artwork'].front_default}" alt="${formName}">
                    </div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = "<p>ポケモンが見つかりませんでした。</p>";
            }
        });
    </script>
</body>
</html>
